---
title: "Ejercicios Semana 13 - resoluci√≥n"
output: html_document
author: "Santiago Sotelo y Nadia Duff√≥"
date: "2025-06-18"
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE, message = FALSE, warning = FALSE)
```

# ‚ú® Ejercicios de repaso en R: an√°lisis descriptivo y prueba chi-cuadrado

En este conjunto de ejercicios repasaremos algunos procedimientos b√°sicos en R relacionados con el an√°lisis descriptivo y el an√°lisis bivariado mediante la prueba chi-cuadrado.

El c√≥digo que aparece m√°s abajo incluye ejemplos, pero est√° incompleto a prop√≥sito. Cada vez que encuentres `____`, significa que debes completar esa parte del c√≥digo.

Trabajaremos con una base de datos de noticias en web que contiene informaci√≥n como si una noticias es falsa o real, si incluye imagen, y c√≥mo se ha compartido en Facebook (*likes*, comentarios, *shares*, y *engagements* -la suma de los tres primeros-).

## üì¶ 1. Preparaci√≥n del entorno

Recuerda siempre iniciar con la carga de los paquetes necesarios. Si deseas saber a qu√© paquete pertenece una funci√≥n, puedes escribir en la consola `?nombre_de_funci√≥n` para consultar la ayuda (en el panel ‚ÄúHelp‚Äù).

```{r}
pacman::p_load(rio, dplyr, ggplot2, scales)
```

## üìÅ 2. Importaci√≥n de la base de datos

Importa la base desde el archivo `data/datanews.xlsx`.

```{r}
df <- import("data/datanews.xlsx")
```

## üîç 3. Exploraci√≥n inicial

Explora la estructura de la base (nombres de columnas, tipos de datos, etc.) usando funciones como `names()`, `head()`, `tail()`, `glimpse()`, `str()`.

```{r}
names(df)
head(df)
tail(df)
glimpse(df)
str(df)
```

## üìä 4. An√°lisis descriptivo

Podemos comenzar describiendo algunas variables mediante tablas y gr√°ficos. Responde las siguientes preguntas:

### ¬øCu√°l es la proporci√≥n de noticias falsas y reales?

Primero, crea una tabla con frecuencias y porcentajes.

```{r}
tabla <- df %>%
  count(es_fake) %>% 
  mutate(pct = round(n / sum(n) * 100))

tabla
```

Luego, representa la informaci√≥n gr√°ficamente con el tipo de gr√°fico m√°s adecuado.

```{r}
ggplot(tabla, aes(x = es_fake, y = pct)) +
  geom_col() +
  labs(title = "Gr√°fico 1: Noticias seg√∫n tipo (falsas y reales)",
       x = "Tipo de noticia",
       y = "Porcentaje") +
  theme_minimal()
```

‚úèÔ∏è Describe brevemente lo que observaste: 

### ¬øC√≥mo var√≠a la presencia de im√°genes entre noticias falsas y reales? 

Primero, construye una tabla de contingencia.

```{r}
tabla <- table(df$tiene_imagen, df$es_fake) %>% 
  prop.table(2)*100

tabla
```

Ahora, grafica la distribuci√≥n.

```{r}
tabla_plot <- df %>%
  group_by(es_fake) %>% 
  count(tiene_imagen) %>%
  mutate(pct = round(n / sum(n) * 100))

ggplot(tabla_plot, aes(x = es_fake, y = pct, fill = tiene_imagen)) +
  geom_col() +
  coord_flip() +
  labs(title = "Gr√°fico 2: Noticias seg√∫n tipo (falsas y reales) por si contienen imagen",
       x = "Tipo",
       y = "Porcentaje",
       fill = "Contiene imagen") +
  theme_minimal()
```

‚úèÔ∏è Describe aqu√≠ lo que observaste:

### ¬øQu√© tendencias se observan en la cantidad de veces que se compartieron las noticias, seg√∫n su tipo (falsas o reales)?

Primero, observa las medidas de tendencia central (m√≠nimo, m√°ximo, media, mediana, etc.) para cada grupo.

```{r}
df_fake <- df %>% 
  filter(es_fake == "Fake")

summary(df_fake$fb_compartido)

df_real <- df %>% 
  filter(es_fake == "Real")

summary(df_real$fb_compartido)
```

Luego, genera los gr√°ficos m√°s adecuados.

```{r}
# Podemos hacer un histograma, por ejemplo
ggplot(df, aes(x = fb_compartido)) +
  geom_histogram() +
  scale_x_log10(labels = label_comma()) + # A√±ade la funci√≥n `scale_x_log10()` para que el eje `x` se vuelva logar√≠tmico y permita graficar mejor la amplitud de datos. Necesitar√°s cargar el paquete {scales}.
  facet_wrap(~es_fake) +
  labs(title = "Gr√°fico 3: N√∫mero de veces que las noticias fueron compartidas seg√∫n tipo (falsas y reales)",
       x = "Veces compartidas",
       y = "Porcentaje") +
  theme_minimal()

# Tambi√©n podemos hacer un boxplot
ggplot(df, aes(x = es_fake, y = fb_compartido)) +
  geom_boxplot() +
  scale_y_log10(labels = label_comma()) + # A√±ade la funci√≥n `scale_y_log10()` para que el eje `y` se vuelva logar√≠tmico y permita graficar mejor la amplitud de datos. Necesitar√°s cargar el paquete {scales}.
  labs(
    title = "Gr√°fico 3: N√∫mero de veces que las noticias fueron compartidas seg√∫n tipo (falsas y reales)",
    x = "Tipo de noticia",
    y = "Veces compartidas (escala log)"
  ) +
  theme_minimal()
```

‚úèÔ∏è Describe aqu√≠ lo que observaste:

## 5. üßê Prueba chi-cuadrado de independencia

Por √∫ltimo, evaluaremos si existe relaci√≥n entre dos variables categ√≥ricas. En este caso, queremos conocer si el uso de im√°genes est√° asociado al tipo de noticia. Partimos de la premisa de que la inclusi√≥n de im√°genes en una noticia puede estar relacionada con intentos de captar la atenci√≥n, generar viralidad o aumentar el *engagement*, especialmente en el caso de las noticias falsas. Adem√°s, las im√°genes podr√≠an utilizarse como estrategia para legitimar la veracidad del contenido.

#### ‚úèÔ∏è Escribe tu hip√≥tesis nula aqu√≠
#### H‚ÇÄ: No existe relaci√≥n entre el tipo de noticia (falsa o real) y la presencia de im√°genes.
#### H‚ÇÅ: Existe relaci√≥n entre el tipo de noticia y la presencia de im√°genes.

Primero genera la tabla de frecuencias observadas y esperadas.

```{r}
tbl <- table(df$tiene_imagen, df$es_fake)
chisq.test(tbl)$observed %>% prop.table(2) *100
chisq.test(tbl)$expected %>% prop.table(2) *100
```

Ahora, realiza la prueba de chi-cuadrado.

```{r}
chisq.test(tbl)
chisq.test(tbl)$p.value
```

‚úèÔ∏è Interpreta aqu√≠ los resultados:
‚úèÔ∏è ¬øQu√© indica e valor-p?
‚úèÔ∏è ¬øRechazas o no la hip√≥tesis nula?
